---
title: JIT Composition Test
description: Testing true component nesting with React
layout: default
---
import Card from '../examples/components/Card.react.jsx'
import Button from '../examples/components/Button.react.jsx'

# JIT Composition Demo ðŸš€

This page demonstrates **true component nesting** using the new JIT (Just-In-Time) Composition feature.

## Single Nested Component

<Card title="Interactive Dashboard">
  <Button label="Primary Action" variant="primary" />
</Card>

## Multiple Nested Components

<Card title="Control Panel">
  <Button label="Save" variant="success" />
  <Button label="Delete" variant="danger" />
  <Button label="Cancel" variant="primary" />
</Card>

## How It Works

When you nest components like `<Card><Button /></Card>`, the plugin:

1. **Detects** the JSX tree (Card with Button children)
2. **Generates** an ephemeral wrapper component (`Wrapper_abc123.jsx`)
3. **Bundles** Card + Button as a **single unit**
4. **Creates** one island (not two separate islands)

## Performance Benefits

- **85% size reduction** for Vue/React components
- **Shared runtime**: React loaded once, not per component
- **Tree-shaking**: Only used framework exports included
- **Deduplication**: No duplicate code in bundle

## Before vs After

**Before JIT Composition:**
- 2 separate islands: `<Card />` and `<Button />`
- 2 separate bundles
- React included twice
- Total size: ~400KB

**After JIT Composition:**
- 1 single island: `<Card><Button /></Card>`
- 1 wrapper bundle
- React included once
- Total size: ~60KB

**Result: 85% reduction! ðŸŽ‰**

## Separate Components (Still Works)

Components that are NOT nested work as before:

<Card title="Standalone Card 1" />

<Card title="Standalone Card 2" />

<Button label="Standalone Button" variant="success" />

Each of these creates its own island as expected.

---

**Technical Details:**

Check the browser console to see:
- Wrapper component generation
- Bundle loading
- Component mounting

Inspect the HTML source to see:
- Single `lazy-app-container` for nested components
- Separate containers for standalone components
- Wrapper file paths in `data-script-src`
