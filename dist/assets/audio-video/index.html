<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lumos A11y Video Player</title>
    <meta name="description" content="Accessibile HTML5 Video Player Vanilla JS" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* 
        Reset e Custom Styling per Range Inputs 
        Garantisce un'area di tocco adeguata per WCAG 2.2 Target Size
      */
      .lumos-range {
        -webkit-appearance: none;
        appearance: none; 
        background: transparent;
        cursor: pointer;
        height: 20px; /* Minimo touch target vertical */
        width: 100%;
        position: relative;
        z-index: 20;
      }
      
      .lumos-range:focus {
        outline: none;
      }

      /* Track styling */
      .lumos-range::-webkit-slider-runnable-track {
        width: 100%;
        height: 4px;
        cursor: pointer;
        background: transparent; /* Gestito via JS/CSS container */
        border-radius: 2px;
      }
      
      /* Thumb styling */
      .lumos-range::-webkit-slider-thumb {
        -webkit-appearance: none;
        height: 16px;
        width: 16px;
        border-radius: 50%;
        background: #ffffff;
        cursor: pointer;
        margin-top: -6px; 
        box-shadow: 0 2px 6px rgba(0,0,0,0.4);
        transition: transform 0.1s, box-shadow 0.1s;
      }

      .lumos-range:focus-visible::-webkit-slider-thumb {
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.6); /* Focus ring visibile e accessibile */
        transform: scale(1.2);
      }

      /* Nasconde la scrollbar in fullscreen */
      :fullscreen {
        overflow: hidden;
      }
      
      /* Utility cursor pointer per il video player */
      video.cursor-pointer {
        cursor: pointer;
      }

      /* Utility per nascondere visivamente ma non agli screen reader */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border-width: 0;
      }
    </style>
  <link rel="stylesheet" href="/index.css">
</head>
  <body class="bg-gray-950 text-white antialiased selection:bg-indigo-500 selection:text-white min-h-screen flex flex-col items-center justify-center p-4 gap-12">
    
    <header class="text-center max-w-2xl animate-fade-in mt-8">
      <h1 class="text-4xl font-extrabold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-cyan-400 mb-4">
        Lumos Player (Vanilla)
      </h1>
      <p class="text-gray-400 text-lg leading-relaxed">
        Progressive Enhancement in azione. 
        Componenti nativi potenziati per accessibilità e design.
      </p>
    </header>

    <!-- 
      1. HTML5 VIDEO CORE
    -->
    <main class="w-full max-w-4xl">
      <div class="flex items-center gap-2 mb-4 px-1">
        <span class="px-2 py-1 text-xs font-bold uppercase tracking-wider bg-indigo-500/10 text-indigo-400 rounded border border-indigo-500/20">Video</span>
        <h2 class="text-sm font-medium text-gray-400">Cinematic Experience</h2>
      </div>

      <div class="lumos-wrapper relative aspect-video bg-black shadow-2xl rounded-2xl overflow-hidden border border-gray-800 group" id="lumos-video-app" tabindex="-1">
        <video 
          class="w-full h-full object-contain cursor-pointer" 
          poster="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/TearsOfSteel.jpg"
          crossorigin="anonymous"
          playsinline
          controls 
        >
          <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4" type="video/mp4">
          <track kind="captions" label="English" srclang="en" src="#" default />
          <p class="p-4 text-center">Browser non supportato.</p>
        </video>
      </div>
    </main>

    <!-- 
      2. HTML5 AUDIO CORE
      Stesso concetto, UI diversa gestita dalla stessa classe JS.
    -->
    <section class="w-full max-w-4xl mb-12">
      <div class="flex items-center gap-2 mb-4 px-1">
        <span class="px-2 py-1 text-xs font-bold uppercase tracking-wider bg-emerald-500/10 text-emerald-400 rounded border border-emerald-500/20">Audio</span>
        <h2 class="text-sm font-medium text-gray-400">Podcast / Music Interface</h2>
      </div>

      <!-- Wrapper per Audio: Non ha aspect-ratio, è una card -->
      <div class="lumos-wrapper relative w-full bg-gradient-to-r from-gray-900 to-gray-800 rounded-xl border border-gray-700 shadow-lg p-6" id="lumos-audio-app" tabindex="-1">
        <div class="flex items-center gap-6">
          <!-- Immagine copertina aggiornata -->
          <div class="hidden sm:block w-24 h-24 rounded-lg bg-gray-700 overflow-hidden flex-shrink-0 relative shadow-md">
             <!-- Copertina generica o specifica -->
             <div class="w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
                <svg class="w-10 h-10 text-white/80" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>
             </div>
          </div>
          
          <div class="flex-grow min-w-0">
            <h3 class="text-xl font-bold text-white truncate">It All Began With a Burst</h3>
            <p class="text-gray-400 text-sm truncate mb-4">Kishi Bashi</p>

            <audio 
              class="w-full" 
              controls 
              preload="metadata"
              crossorigin="anonymous"
            >
              <!-- File audio super affidabile (Plyr Demo CDN) -->
              <source src="https://cdn.plyr.io/static/demo/Kishi_Bashi_-_It_All_Began_With_a_Burst.mp3" type="audio/mp3">
              <p>Il tuo browser non supporta l'elemento audio.</p>
            </audio>
          </div>
        </div>
      </div>
    </section>

    <footer class="mb-12 text-center text-gray-600 text-sm">
      <p>
        Shortcuts: <span class="text-gray-400 font-mono">Space/K</span> (Play), 
        <span class="text-gray-400 font-mono">J/L</span> (-10s/+10s),
        <span class="text-gray-400 font-mono">M</span> (Mute)
      </p>
    </footer>

    <!-- Entry Point -->
    <script type="module" src="/index.tsx"></script>
  </body>
</html>