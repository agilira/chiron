const i18n=window.CHIRON_I18N||{},t=(key,fallback="")=>i18n[key]||fallback;window.t=t;const CONFIG={SEARCH:{MIN_QUERY_LENGTH:2,DEBOUNCE_DELAY:200,RATE_LIMIT_MS:100,MAX_RESULTS:10,FETCH_TIMEOUT:1e4,MAX_FILE_SIZE:10485760},UI:{TOAST_DURATION:3e3,TOAST_ANIMATION_DELAY:100,TOAST_FADE_OUT_DELAY:300,BLUR_DELAY:200,COOKIE_BANNER_DELAY:1e3,WATCH_DEBOUNCE_DELAY:300,SCROLL_OFFSET:20,HEADER_SCROLL_OFFSET:50,TOC_SCROLL_OFFSET:100,SCROLL_TO_TOP_THRESHOLD:300},CACHE:{MAX_SIZE:50}},debounce=(func,wait)=>{let timeout;return function(...args){clearTimeout(timeout),timeout=setTimeout(()=>{clearTimeout(timeout),func(...args)},wait)}},showToast=(message,type="info")=>{const toast=document.createElement("div");toast.className=`toast toast-${type}`,toast.textContent=message,toast.style.cssText=`\n        position: fixed;\n        top: 20px;\n        right: 20px;\n        background: ${"success"===type?"var(--success-500)":"var(--error-500)"};\n        color: white;\n        padding: 12px 20px;\n        border-radius: var(--border-radius);\n        box-shadow: var(--shadow-lg);\n        z-index: 1000;\n        transform: translateX(100%);\n        transition: transform 0.3s ease;\n    `,document.body.appendChild(toast),setTimeout(()=>{toast.style.transform="translateX(0)"},CONFIG.UI.TOAST_ANIMATION_DELAY),setTimeout(()=>{toast.style.transform="translateX(100%)",setTimeout(()=>{toast.parentNode&&toast.parentNode.removeChild(toast)},CONFIG.UI.TOAST_FADE_OUT_DELAY)},CONFIG.UI.TOAST_DURATION)};window.showToast=showToast;const hashCode=str=>{let hash=0;for(let i=0;i<str.length;i++)hash=(hash<<5)-hash+str.charCodeAt(i),hash&=hash;return Math.abs(hash).toString(36)};(()=>{const skipLink=document.createElement("a");skipLink.href="#main-content",skipLink.textContent=t("skip_to_content","Skip to main content"),skipLink.className="skip-link",skipLink.style.cssText="\n        position: absolute;\n        top: -40px;\n        left: 6px;\n        background: var(--primary-600);\n        color: white;\n        padding: 8px;\n        text-decoration: none;\n        border-radius: 4px;\n        z-index: 1000;\n        transition: top 0.3s;\n    ",skipLink.addEventListener("focus",()=>{skipLink.style.top="6px"}),skipLink.addEventListener("blur",()=>{skipLink.style.top="-40px"}),document.body.insertBefore(skipLink,document.body.firstChild)})(),(()=>{const sidebarToggle=document.querySelector(".sidebar-toggle");sidebarToggle&&(sidebarToggle.setAttribute("aria-label",t("sidebar_toggle_aria","Toggle sidebar navigation")),sidebarToggle.setAttribute("aria-expanded","false"));const searchInput=document.getElementById("searchInput");searchInput&&searchInput.setAttribute("aria-label",t("aria_search","Search documentation"))})(),document.addEventListener("keydown",e=>{if("Escape"===e.key){const sidebar=document.getElementById("sidebar"),mobileOverlay=document.getElementById("mobileOverlay");sidebar&&sidebar.classList.contains("open")&&(sidebar.classList.remove("open"),mobileOverlay&&mobileOverlay.classList.remove("open"),document.body.style.overflow="");const searchResults=document.getElementById("searchResults");searchResults&&(searchResults.hidden=!0,searchResults.style.display="none");const searchInput=document.getElementById("searchInput");searchInput&&searchInput.blur()}});const updateActiveNavigation=()=>{const sections=document.querySelectorAll("section[id]"),navItems=document.querySelectorAll('.nav-item[href^="#"]');let currentSection="";sections.forEach(section=>{const rect=section.getBoundingClientRect(),headerHeight=document.querySelector(".header").offsetHeight;rect.top<=headerHeight+CONFIG.UI.HEADER_SCROLL_OFFSET&&rect.bottom>headerHeight+CONFIG.UI.HEADER_SCROLL_OFFSET&&(currentSection=section.id)}),navItems.forEach(item=>{item.classList.remove("active"),item.getAttribute("href")===`#${currentSection}`&&item.classList.add("active")})};updateActiveNavigation(),window.addEventListener("scroll",debounce(updateActiveNavigation,100),{passive:!0}),(()=>{const themeToggle=document.querySelector(".theme-toggle");if(!themeToggle)return;const getStoredTheme=()=>{try{return localStorage.getItem("theme")}catch(_e){return console.warn("localStorage not available:",_e),null}},setTheme=theme=>{document.documentElement.setAttribute("data-theme",theme);const themeToggleBtn=document.getElementById("themeToggle");themeToggleBtn&&(themeToggleBtn.setAttribute("data-theme",theme),themeToggleBtn.setAttribute("aria-label","dark"===theme?"Switch to light mode":"Switch to dark mode")),updateLogosForTheme(theme),updateHighlightTheme(theme)},updateHighlightTheme=_theme=>{if(document.querySelectorAll('link[href*="highlight.js"]').forEach(link=>link.remove()),"undefined"!=typeof hljs){const excludedLanguages=["markdown","md","text","plaintext","txt"];document.querySelectorAll("pre code").forEach(block=>{const langClass=block.className.split(" ").find(cls=>cls.startsWith("language-"));if(langClass){const lang=langClass.replace("language-","");if(excludedLanguages.includes(lang.toLowerCase()))return void(block.className=`language-${lang} nohighlight`);block.className=langClass}else block.className="";delete block.dataset.highlighted,hljs.highlightElement(block)})}},updateLogosForTheme=theme=>{document.querySelectorAll("[data-logo-light], [data-logo-dark]").forEach(logo=>{const lightSrc=logo.getAttribute("data-logo-light"),darkSrc=logo.getAttribute("data-logo-dark");"dark"===theme&&darkSrc?logo.src=darkSrc:lightSrc&&(logo.src=lightSrc)});const headerLightLogos=document.querySelectorAll(".logo-light"),headerDarkLogos=document.querySelectorAll(".logo-dark"),footerLightLogos=document.querySelectorAll(".footer-logo-light"),footerDarkLogos=document.querySelectorAll(".footer-logo-dark");"dark"===theme?(headerLightLogos.forEach(logo=>logo.style.display="block"),headerDarkLogos.forEach(logo=>logo.style.display="none"),footerLightLogos.forEach(logo=>logo.style.display="none"),footerDarkLogos.forEach(logo=>logo.style.display="block")):(headerLightLogos.forEach(logo=>logo.style.display="none"),headerDarkLogos.forEach(logo=>logo.style.display="block"),footerLightLogos.forEach(logo=>logo.style.display="block"),footerDarkLogos.forEach(logo=>logo.style.display="none"))},savedTheme=getStoredTheme();let systemTheme="light";window.matchMedia&&(systemTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),setTheme(savedTheme||systemTheme),themeToggle.addEventListener("click",()=>{const newTheme="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";setTheme(newTheme),(theme=>{try{localStorage.setItem("theme",theme)}catch(_e){console.warn("Cannot save theme preference:",_e)}})(newTheme)}),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{getStoredTheme()||setTheme(e.matches?"dark":"light")})})(),(()=>{const scrollToTopBtn=document.getElementById("scrollToTop");if(!scrollToTopBtn)return;const toggleScrollButton=()=>{window.pageYOffset>CONFIG.UI.SCROLL_TO_TOP_THRESHOLD?scrollToTopBtn.classList.add("show"):scrollToTopBtn.classList.remove("show")},scrollToTop=()=>{window.scrollTo({top:0,behavior:"smooth"})};window.addEventListener("scroll",toggleScrollButton,{passive:!0}),scrollToTopBtn.addEventListener("click",scrollToTop),scrollToTopBtn.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),scrollToTop())}),toggleScrollButton()})(),document.querySelectorAll('a[href^="#"]').forEach(link=>{link.addEventListener("click",e=>{e.preventDefault();const targetId=link.getAttribute("href").substring(1),targetElement=document.getElementById(targetId);if(targetElement){const header=document.querySelector(".header"),headerHeight=header?header.offsetHeight:0,targetPosition=targetElement.offsetTop-headerHeight-(CONFIG?.UI?.SCROLL_OFFSET||20);window.scrollTo({top:targetPosition,behavior:"smooth"}),history.pushState(null,null,`#${targetId}`)}})}),function(){const switcher=document.querySelector(".language-switcher");if(!switcher)return;const button=switcher.querySelector(".dropdown-toggle"),menu=switcher.querySelector(".dropdown-menu");button&&menu&&(button.addEventListener("click",e=>{if(e.stopPropagation(),"true"===button.getAttribute("aria-expanded"))button.setAttribute("aria-expanded","false"),menu.setAttribute("hidden","");else{button.setAttribute("aria-expanded","true"),menu.removeAttribute("hidden");const firstItem=menu.querySelector(".dropdown-item");firstItem&&setTimeout(()=>firstItem.focus(),100)}}),menu.addEventListener("keydown",e=>{"Escape"===e.key&&(button.setAttribute("aria-expanded","false"),menu.setAttribute("hidden",""),button.focus())}),menu.addEventListener("keydown",e=>{const items=Array.from(menu.querySelectorAll(".dropdown-item")),currentIndex=items.indexOf(document.activeElement);"ArrowDown"===e.key?(e.preventDefault(),items[(currentIndex+1)%items.length].focus()):"ArrowUp"===e.key&&(e.preventDefault(),items[(currentIndex-1+items.length)%items.length].focus())}),document.addEventListener("click",e=>{switcher.contains(e.target)||(button.setAttribute("aria-expanded","false"),menu.setAttribute("hidden",""))}),menu.querySelectorAll(".dropdown-item").forEach(item=>{item.addEventListener("click",_e=>{const locale=item.getAttribute("lang");if(locale)try{localStorage.setItem("chiron_locale",locale)}catch(_err){}})}))}(),(()=>{const sidebar=document.getElementById("sidebar"),sidebarToggle=document.getElementById("sidebarToggle"),mobileOverlay=document.getElementById("mobileOverlay");if(!sidebarToggle||!mobileOverlay)return;let lastFocusedElement=null;const getFocusableElements=container=>container.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])'),closeSidebar=()=>{sidebar.classList.remove("open"),mobileOverlay.classList.remove("open"),sidebar.setAttribute("aria-hidden","true"),sidebarToggle.setAttribute("aria-expanded","false"),document.body.style.overflow="",lastFocusedElement&&lastFocusedElement.focus()};sidebarToggle.addEventListener("click",()=>{sidebar.classList.contains("open")?closeSidebar():(()=>{lastFocusedElement=document.activeElement,sidebar.classList.add("open"),mobileOverlay.classList.add("open"),sidebar.setAttribute("aria-hidden","false"),sidebarToggle.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden";const focusables=getFocusableElements(sidebar);focusables.length&&focusables[0].focus()})()}),mobileOverlay.addEventListener("click",closeSidebar),document.addEventListener("keydown",e=>{if(sidebar.classList.contains("open"))if("Escape"!==e.key){if("Tab"===e.key){const focusables=Array.from(getFocusableElements(sidebar));if(!focusables.length)return;const first=focusables[0],last=focusables[focusables.length-1];e.shiftKey&&document.activeElement===first?(e.preventDefault(),last.focus()):e.shiftKey||document.activeElement!==last||(e.preventDefault(),first.focus())}}else closeSidebar()}),window.addEventListener("resize",()=>{window.innerWidth>768&&(sidebar.classList.remove("open"),mobileOverlay.classList.remove("open"),document.body.style.overflow="")})})(),(()=>{const collapsibleButtons=document.querySelectorAll(".nav-section-title.collapsible");collapsibleButtons.length&&(collapsibleButtons.forEach(button=>{button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const section=button.closest(".nav-section");if(!section)return;const isExpanded=section.classList.contains("expanded");section.classList.toggle("expanded"),button.setAttribute("aria-expanded",!isExpanded);const sectionTitle=button.textContent.trim();try{const stateKey=`sidebar-section-${sectionTitle}`;localStorage.setItem(stateKey,isExpanded?"closed":"open")}catch{}})}),collapsibleButtons.forEach(button=>{const stateKey=`sidebar-section-${button.textContent.trim()}`;try{const savedState=localStorage.getItem(stateKey);if(savedState){const section=button.closest(".nav-section"),shouldBeOpen="open"===savedState;shouldBeOpen!==section.classList.contains("expanded")&&(section.classList.toggle("expanded",shouldBeOpen),button.setAttribute("aria-expanded",shouldBeOpen))}}catch{}}))})(),document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&"/"===e.key){e.preventDefault();const sidebarToggle=document.getElementById("sidebarToggle");sidebarToggle&&sidebarToggle.click()}}),function(){const headerNav=document.querySelector(".header-nav"),dropdownItems=document.querySelectorAll(".header-nav-item");if(!dropdownItems.length)return;const triggerMode=headerNav?.getAttribute("data-dropdown-trigger")||"hover";dropdownItems.forEach(item=>{const button=item.querySelector(".header-nav-link"),dropdown=item.querySelector(".header-dropdown");if(!button||!dropdown)return;let closeTimeout=null;const openDropdown=()=>{closeTimeout&&(clearTimeout(closeTimeout),closeTimeout=null),item.classList.add("open"),button.setAttribute("aria-expanded","true")},closeDropdown=(immediate=!1)=>{immediate?(item.classList.remove("open"),button.setAttribute("aria-expanded","false")):closeTimeout=setTimeout(()=>{item.classList.remove("open"),button.setAttribute("aria-expanded","false")},200)};button.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),item.classList.contains("open")?closeDropdown(!0):(dropdownItems.forEach(otherItem=>{if(otherItem!==item&&otherItem.classList.contains("open")){otherItem.classList.remove("open");const otherButton=otherItem.querySelector(".header-nav-link");otherButton&&otherButton.setAttribute("aria-expanded","false")}}),openDropdown())}),"hover"===triggerMode&&(item.addEventListener("mouseenter",()=>{openDropdown()}),item.addEventListener("mouseleave",()=>{closeDropdown()}),dropdown.addEventListener("mouseenter",()=>{closeTimeout&&(clearTimeout(closeTimeout),closeTimeout=null)}),dropdown.addEventListener("mouseleave",()=>{closeDropdown()})),button.addEventListener("keydown",e=>{"Escape"===e.key&&item.classList.contains("open")&&(closeDropdown(!0),button.focus())}),dropdown.querySelectorAll("a").forEach(link=>{link.addEventListener("click",()=>{closeDropdown(!0)})})}),document.addEventListener("click",e=>{!e.target.closest(".header-nav-item")&&dropdownItems.forEach(item=>{if(item.classList.contains("open")){item.classList.remove("open");const button=item.querySelector(".header-nav-link");button&&button.setAttribute("aria-expanded","false")}})})}();